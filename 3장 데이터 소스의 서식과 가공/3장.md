## 3장 데이 소스의 서식과 가공

`목표`  크롤링으로 수집한 데이터를 어떻게 다뤄야 하는지 살펴보기



### 3-1 웹의 다양한 데이터 형식

> ### 텍스트 데이터

* 일반적으로 텍스트 에디터로 편집할 수 있는 데이터 포맷을 나타낸다.
* 주로 일반적인 자연 언어(한국어, 영어, 일본어 등)와 숫자 등으로 구성된다.
* 특수하게 줄 바꿈과 탭 등의 제어 문자도 포함돼 있는데, 그 밖에는 모두 에디터에서 시각적으로 확인할 수 있는 데이터 형식
* 프로그래밍 언어의 소스코드도 텍스트 데이터
* XML/JSON/YAML/CSV...처럼 웹에서 주로 사용되는 데이터 포맷은 텍스트 데이터를 기반으로 한다.
* 어떤 문자 코드(문자 인코딩)로 저장돼 있느냐에 따른 다른 의미를 갖게 된다.
* 최근에는 텍스트 데이터를 기반으로 하는 데이터는 모두 UTF-8로 인코딩 되어 있다.



> ### 바이너리 데이터

* 텍스트 데이터 외의 데이터
* 문자와 상관없이 데이터를 사용할 수 있는 데이터 영역을 활용하는 데이터 형식
* 그래서 일반적인 텍스트 에디터로는 열 수 없다.
* 또한 사람이 시각적으로 확인해도 의미를 알 수 없는 문자열로 표현된다.
* 데이터를 효율적으로 저장할 수 있는 데이터 형식
* 사실 웹에서 사용되는 대부분의 데이터 - 이미지와 동영상 같은 용량이 큰 파일 때문에



> ### XML 분석

* 텍스트 데이터를 기반으로 하는 형식
* 특정 목적에 따라 데이터를 태그로 감싸 마크업 하는 범용적인 형식
* 웹 표준을 제정하는 W3C에 의해 만들어졌다.
* 데이터를 계층 구조로 표현할 수 있다.
* BeautifulSoup를 이용하면 XML을 분석할 수 있다.



> ### JSON 분석

* JavaScript Object Notation도 텍스트 데이터를 기반으로 하는 가벼운 데이터 형식
* 자바스크립트에서 사용하는 객체 표기 방법을 기반으로 한다.
* 자바스크립트 전용 데이터 형식이 아니다.
* 다양한 소프트웨어 프로그래밍 언어끼리 데이터를 교환할 때 사용한다.
* 구조가 단순하다는 것이 큰 장점
* 규칙은 단순하지만 배열 안에 객체를 넣거나 객체 안에 배열을 넣는 방법 등으로 복잡한 데이터를 표현할 수 있다.



> ### 파이썬으로 JSON 분석하기

* JSON의 배열 = 파이썬의 리스트
* JSON의 객체 = 파이썬의 딕셔너리
* JSON 데이터를 다루는 기능은 파이썬이 표준적으로 지원한다.
* json.load() 함수의 매개변수에는 open() 함수의 리턴 값인 파일 포인터를 지정한다.
* json.loads() 함수의 매개변수에는 JSON 형식의 문자열을 지정한다.



> ### JSON 형식으로 출력하기

* json.dumps() 함수를 사용한다.



> ### **YAML 분석**

* 배열, 해시, 스칼라
* 배열을 나타낼 때는 각 행의 앞에 하이픈을 붙인다. 하이픈 뒤에는 공백이 필요하다.
* 해시는 자바스크립트의 객체와 같은 것. 키:값
* 한 줄에 표현하는 것이 가능한 플로우 스타일이 제공된다.
* 들여 쓰기를 사용해 계층 구조를 표현하는 것이 특징인 데이터 형식(파이썬과 유사)
* 텍스트 데이터
* XML보다 간단하며 JSON과 거의 비슷하다.
* JSON 대용으로도 사용되며, 애플리케이션 설정 파일을 작성할 때 많이 사용된다.
* 루비와 PHP 설정 파일 형식으로 사용되고 있다.
* 파이썬에서 YAML을 다루려면 PyYAML이라는 모듈을 설치해야 한다.



> ### 파이썬에서 YAML 쓰기

* 파이썬 데이터를 YAML로 출력하고 싶을 때는 dump() 함수를 사용한다.
  * ex ) yaml.dump(v)
* 문자열 str(YAML)을 파이썬 데이터로 변환할 때 load() 함수를 사용한다.
  * ex ) yaml.load(str)



> ### CSV/TSV 분석

* 웹에서 굉장히 많이 사용되며 구조가 단순하고 엑셀로 쉽게 만들 수 있다.
* CSV(Comma-Separated Values) 파일은 각 필드를 쉼표로 구분한다. 텍스트 파일이다.
* TSV(Tab-Separated Values) 탭으로 필드를 구분한다.
* SSV(Space-Separated Values) 공백으로 필드를 구분한다.
* 데이터 분석 라이브러리 Pandas를 이용하면 CSV 파일을 쉽게 읽고 편집할 수 있다.





### 3-2 데이터베이스

> 규모가 크지 않은 데이터라면 CSV, JSON 형식을 사용해도 괜찮지만, 데이터의 규모가 굉장히 크거나 복잡하면 데이터베이스를 사용하는 것이 편리하다.



> ### 데이터베이스

* 대량의 데이터를 다루기 위해 특화된 소프트웨어
* 내부에는 여러 개의 테이블(엑셀의 시트)이 있다.
* 장점
  * 데이터와 관련된 모든 처리를 하나의 소프트웨어로 할 수 있다.
  * 여러 데이터의 속성을 연관시키며 저장할 수 있다.
  * 중복된 데이터를 허용하지 않는 등의 제약을 걸 수 있다.
  * 데이터의 정합성을 확보할 수 있다.
  * 여러 사람이 데이터를 함께 공유할 수 있다.
  * 데이터에 동시 접근했을 때의 문제를 처리해준다.
  * 대량의 데이터를 조금씩 읽어 사용할 수 있으며, 정렬 등도 쉽게 가능하다.
* 종류
  * MySQL / MaridDB
  * PostgreSQL
  * MongoDB(NoSQL)
  * TinyDB(NoSQL)
  * Microsoft SQL Server
  * Oracle Database
  * SQLite



> ### **SQL(Structured Query Language)**

* 데이터베이스 시스템에서 자료를 처리하는 용도로 사용되는 구조적 데이터 질의 언어



> ### SQLite

* 가볍게 파일 하나로 사용할 수 있는 데이터베이스
* 웹 브라우저 내부에서도 사용할 수 있으며, 안드로이드/iOS에서 표준으로 제공되는 데이터베이스
* 가벼우면서도 데이터베이스 조작 언어인 SQL을 사용해 데이터베이스를 처리할 수 있다.



> ### MySQL

* 오픈소스 데이터베이스
* 빠르고 사용하기 쉽고 블로그, 위키와 같은 다양한 웹 애플리케이션의 대규모 데이터 저장에 사용되고 있다.
* 서버에 설치해서 사용하는 애플리케이션



> ### TinyDB

* NoSQL
* 문서형 데이터베이스 라이브러리
* 어느 정도 규모 있는 데이터를 다룰 때는 MongoDB를 사용하는 것이 좋다.

